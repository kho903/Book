# 운영체제의 구조
## 1. 커널과 인터페이스
- 커널은 프로세스 관리, 메모리 관리, 저장장치 관리와 같은 운영체제의 핵심적인 기능을 모아놓은 것
- 운영체제의 성능은 커널이 좌우
- 운영체제의 인터페이스는 커널에 사용자의 명령을 전달하고 실행 결과를 사용자에게 알려주는 역할을 함
- 운영체제는 크게 두부분으로 사용자와 응용 프로그램에 인접하여 커널에 명령을 전달하고 실행 결과를 사용자와 응용 프로그램에 돌려주는
인터페이스와, 운영체제의 핵심 기능을 모아놓은 커널로 나뉜다.
- 운영체제는 커널과 인터페이스를 분리하여 같은 커널 내에 다른 인터페이스로 제작 가능

## 2. 시스템 호출과 디바이스 드라이버
### 2.1 시스템 호출
- 커널이 자신을 보호하기 위해 만든 인터페이스
- 자원을 이용하려면 시스템 호출 인터페이스를 이용해 접근해야 함
- 응용 프로그램 입장에서의 시스템 호출
  - 직접 호출 : 응용 프로그램이 자기 마음대로의 위치에 데이터를 저장하려 할 것이고, 다른 데이터가 손상될 가능성이 있음
  - 시스템 호출을 통한 접근 : 커널이 제공하는 write()함수를 사용하여 데이터 저장 요청. 응용 프로그램은 데이터가 어느위치에 어떤 방식으로
    저장될 지 모르고, 읽고 싶다면 read()함수로 시스템 호출을 이용해 가져온다. 시스템 호출을 이용하면 커널이 데이터를 가져오거나 저장하는 것을
    전적으로 책임지기 때문에 컴퓨터 자원을 관리하기가 수월

- 시스템 호출은 커널이 제공하는 시스템 자원의 사용과 연관된 함수
- 응용 프로그램이 하드웨어 자원에 접근하거나 운영체제가 제공하는 서비스를 이용하려 할 때는 시스템 호출을 사용해야 함
- 운영체제는 커널이 제공하는 서비스를 시스템 호출로 제한하고 다른 방법으로 커널에 들어오지 못하게 막음으로써 컴퓨터 자원을 보호
- 시스템 호출은 커널이 제공하는 서비스를 이용하기 위한 인터페이스이며, 사용자가 자발적으로 커널 영역에 진입할 수 있는 유일한 수단

### 2.2 드라이버
- 커널과 하드웨어의 인터페이스 담당
- 커널의 입출력의 기본적인 부분을 제작, 하드웨어의 특성 반영한 소프트웨어를 하드우 ㅔ어 제작자에게 받아 커널이 실행될 때 함께 실행되도록
하는데, 이 소프트웨어를 디바이스 드라이버라 부름

## 3. 커널의 구성
- 운영체제의 핵심 기능을 모아놓은 커널이 주로 하는 일은 프로세스 관리, 메모리 관리, 파일 시스템 관리, 입출력 관리, 
  프로세스 간 통신 관리 (Inter-Process Communication, IPC) 등이다.
- 커널은 단일형 구조, 계층형 구조, 마이크로 구조 커널로 구분됨

### 3.1 단일형 구조 커널
- 초창기 운영체제 구조.
- 커널의 핵심 기능을 구현하는 모듈들이 구분없이 하나로 구성
- 장점
  - 모듈간 통신 비용이 줄어들어 효율적인 운영 가능
- 단점
  - 버그나 오류 처리 힘듦
  - 상호 의존성이 높아 작은 결함이 시스템 전체로 확산 될 수 있음
  - 다양한 환경의 시스템에 적용 어려움
  - 현대에는 구현 어려움 (크고 복잡)

### 3.2 계층형 구조 커널
- 단일형 구조 커널의 발전 형태.
- 비슷한 기능을 가진 모듈을 묶어 하나의 계층으로 만들고 계층 간의 통신을 통해 운영체제를 구현하는 방식
- 오류 처리가 비교적 쉬움
- 계층별로 묶여 있어 디버깅도 쉬움
- 오늘날의 운영체제의 대부분의 구조

### 3.3 마이크로 구조 커널
- 계층형 구조가 거대해짐에 따라 오류를 잡기가 어려워짐
- 계층형 구조의 접근 방식과 반대로 개발된 커널이 마이크로 구조 커널이다.
- 프로세스 관리, 메모리 관리, 프로세스 간 통신 관리 등 가장 기본적인 기능만 제공
- 각 모듈이 독립적으로 작동하여 하나의 모듈이 실패해도 전체 운영체제는 정상 동작
- 이식의 용이하고 가벼워 CPU 용량이 작은 시스템이도 적용 가능

### 3.4 가상머신
- C언어는 다른 커널을 가진 운영체제와의 호환성이 떨어져 유닉스에서 작성한 코드가 윈도우에서 작동하지 않을 수 있다.
- 호환성 문제를 해결한 언어인 자바 : 운영체제 위에 가상 머신을 만들고 그 위에서 응용 프로그램이 작동하게 함
- 가상 머신은 운영체제와 응용 프로그램 사이에서 작동하는 프로그램으로, 가상머신을 설치하면 응용 프로그램이 모두 동일한 환경에서 작동하는 것처럼 보임
- 개발자는 하나의 자바 코드만 작성하면 각 운영체제별로 다양한 가상머신 위에서 동작하는데 이를 자바 가상머신 (Java Virtual Machine, JVM)이라
함
- 가상머신은 호환성이 높아지지만 응용 프로그램이 가상머신을 통해서만 작동하기 때문에 느려진다는 단점도 있다.

