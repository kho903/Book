# 메모리의 주소 공간
- 메모리에 저장된 정보의 위치는 주소로 나타낼 수 있다. 그 주소에는 물리 주소와 논리 주소 2가지가 있다.
- 물리 주소는 메모리 하드웨어가 사용하는 주소, 논리 주소는 CPU와 실행 중인 프로그램이 사용하는 주소.

## 물리 주소와 논리 주소
- CPU와 메모리에 저장되어 실행 중인 프로그램은 메모리에 몇 번지에 무엇이 저장되어 있는지 다 알지 못한다. 메모리에 저장된 정보는 시시각각 변하기 때문이다.
- 주소에는 메모리가 사용하는 물리 주소가 있고, CPU와 실행 중인 프로그램이 사용하는 논리 주소가 있다.
- 메모리가 사용하는 물리 주소는 말 그대로 정보가 실제로 저장된 하드웨어상의 주소.
- CPU와 실행 중인 프로그램이 사용하는 논리 주소는 실행 중인 프로그램 각각에게 부여된 0번지부터 시작되는 주소.
- 모든 프로그램은 모두 물리 주소가 아닌 0번지부터 시작하는 자신만을 위한 주소인 논리 주소를 가지고 있다. CPU는 이 논리 주소를 받아들이고, 해석하고, 연산한다.
- 정리하면, 메모리가 사용하는 주소는 하드웨어상의 실제 주소인 물리 주소이고, CPU와 실행 중인 프로그램이 사용하는 주소는 각각의 프로그램에 부여된 논리 주소.
- 그런데 CPU가 이해하는 주소가 논리 주소라 해도 메모리와 상호작용을 위해 논리 주소 <-> 물리 주소 간의 변환 필요.
- 논리 주소와 물리 주소 간의 변환은 CPU와 주소 버스 사이에 위치한 메모리 관리 장치 (MMU; Memory Management Unit)라는 하드웨어에 의해 수행됨.
- MMU는 CPU가 발생시킨 논리 주소에 베이스 레지스터 값을 더하여 논리 주소를 물리 주소로 변환한다. 예로, 베이스 레지스터에 15000 논리 주소가 100번지라면
15100번지로 변환된다. 
- 베이스 레지스터는 프로그램의 가장 작은 물리 주소, 즉 프로그램의 첫 물리 주소를 저장하는 셈이고, 논리 주소는 프로그램의 시작점으로부터 떨어진 거리인 셈.

## 메모리 보호 기법
- 1000 ~ 1999번지의 물리 주소인 A 프로그램, 2000~2999번지의 B 프로그램이 있을 때, A 프로그램의 명령어 중 1500 번지에 숫자 100을 저장하라는 명령어가 있다면 이 
명령어는 실행되어서는 안 된다. 프로그램의 논리 주소 영역을 벗어났기 때문이다. 전혀 상관 없는 B 프로그램의 영역인 2500 번지에 100이 저장될 수 있다.
- 이렇게 다른 프로그램의 영역을 침법할 수 있는 명령어는 위험하기 때문에 논리 주소 범위를 벗어나는 명령어 실행을 방지하고 실행 중인 프로그램이 다른 프로그램에 영향을
받지 않도록 보호하는 한계 레지스터가 있다.
- 베이스 레지스터가 실행 중인 프로그램의 가장 작은 물리 주소를 저장한다면, 한계 레지스터는 논리 주소의 최대 크기를 저장한다. 즉, 프로그램의 물리 주소 범위는
베이스 레지스터 값 이상, 베이스 레지스터 값 + 한계 레지스터 값 미만이 된다.
- CPU가 접근하려는 논리 주소는 한계 레지스터가 저장한 값보다 커서는 안 된다.
- CPU는 메모리에 접근하기 전에 접근하고자 하는 논리 주소가 한계 레지스터보다 작은지를 항상 검사한다. 만약 CPU가 한계 레지스터보다 높은 논리 주소에 접근하려고 하면
인터럽트(트랩)을 발생시켜 실행을 중단한다.

## 키워드 정리
- 물리 주소는 메모리 하드웨어상의 주소이고, 논리 주소는 CPU와 실행 중인 프로그램이 사용하는 주소.
- MMU는 논리 주소를 물리 주소로 변환.
- 베이스 레지스터는 프로그램의 첫 물리 주소를 저장.
- 한계 레지스터는 실행 중인 프로그램의 논리 주소의 최대 크기를 저장.

