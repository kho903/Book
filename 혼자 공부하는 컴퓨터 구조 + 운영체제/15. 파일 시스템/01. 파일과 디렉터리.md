# 15-01. 파일과 디렉터리
- 당연하게 사용해 왔던 파일과 디렉터리는 모두 운영체제 내부 파일 시스템이 관리하는 존재. 

## 파일
- 일상적으로 컴퓨터를 이용할 때는 파일 단위로 이용. 파일(file)이란 하드 디스크나 SSD와 같은 보조기억장치에 저장된 관련 정보의 집합을 의미. 즉, 파일은 의미 있고 관련 있는 정보를 모은 논리적 단위를 의미.
- 모든 파일에는 이름과 파일을 실행하기 위한 정보, 그리고 파일 관련 부가 정보가 있다. 이 부가 정보를 속성(attribute) 또는 메타 데이터(metadata)라고 부른다.
- 윈도우에서 임의의 파일 선택 후 오른쪽 버튼 클릭으로 [속성]을 선택할 수 있다. 파일 형식, 위치, 크기 등 파일과 관련된 다양한 정보의 대화상자가 나타나는데, 이러한 정보가 바로 파일 속성.

### 파일 속성과 유형
- 운영체제마다 유지하는 파일 속성은 조금씩 차이가 있지만, 대표적인 속성의 종류는 다음과 같다. 운영체제, 그중에서 파일 시스템은 파일별로 다음과 같은 속성을 유지하고 관리.

| 속성 이름     | 의미                                     |
|-----------|----------------------------------------|
| 유형        | 운영체제가 인지하는 파일의 종류를 나타냄.                |
| 크기        | 파일의 현재 크기와 허용 가능한 최대 크기를 나타냄.          |
| 보호        | 어떤 사용자가 해당 파일을 읽고, 쓰고, 실행할 수 있는지를 나타냄. |
| 생성 날짜     | 파일이 생성된 날짜를 나타냄.                       |
| 마지막 접근 날짜 | 파일에 마지막으로 접근한 날짜를 나타냄.                 |
| 마지막 수정 날짜 | 파일이 마지막으로 수정된 날짜를 나타냄.                 |
| 생성자       | 파일을 생성한 사용자를 나타냄.                      |
| 소유자       | 파일을 소유한 사용자를 나타냄.                      |
| 위치        | 파일의 보조기억장치상의 현재 위치를 나타냄.               |

- 파일 속성 중 파일 유형은 운영체제가 인식하는 파일 종류를 나타냄. 같은 이름의 파일일지라도 텍스트 파일, 실행 파일, 음악 파일 등 유형이 다르면 실행 양상도 달라짐. 그래서 파일을 실행할 운영체제에 파일 유형을
알려주어야 한다. 파일 유형을 알리기 위해 가장 흔히 사용하는 방식은 파일 이름 뒤에 붙는 확장자(extension)를 이용하는 것.
- 확장자는 파일 종류가 무엇인지 운영체제에 알려주는 힌트와도 같다.

| 파일 유형      | 대표적인 확장자                  |
|------------|---------------------------|
| 실행 파일      | 없는 경우, exe, com, bin      |
| 목적 파일      | obj, o                    |
| 소스 코드 파일   | c, cpp, cc, java, scm, py |
| 워드 프로세서 파일 | xml, rtf, doc, docx       |
| 라이브러리 파일   | lib, a, so, dll           |
| 멀티미디어 파일   | mpeg, mov, mp3, mp4, avi  |
| 백업/보관 파일   | rar, zip, tar             |

### 파일 연산을 위한 시스템 호출
- 파일을 다루는 모든 작업은 운영체제에 의해 이뤄진다. 어떤 응용 프로그램도 임의로 파일을 조작할 수 없으며 파일을 다루려면 운영체제에 부탁해야 한다. 이를 위해 운영체제는 다음과 같은 파일 연산을 위한
시스템 호출을 제공한다.
  - 파일 생성 / 삭제 / 열기 / 닫기 / 읽기 / 쓰기

## 디렉터리 (Directory)
- 파일들을 일목요연하게 관리하기 위해 디렉터리를 이용할 수 있다. 윈도우 운영체제에서는 디렉터리를 폴더(folder)라고 부른다.
- 옛날 운영체제에서는 하나의 디렉터리만 존재. 모든 파일이 하나의 디렉터리 아래에 있었다. 이와 같은 디렉터리 구조를 1단계 디렉터리(single-level directory)라고 부른다.
- 하지만 실제로 이렇게 사용하는 컴퓨터는 거의 없다. 컴퓨터 용량이 커지다 보니 저장할 수 있는 파일도 많아지고, 1단계 디렉터리로는 많은 파일을 관리하기가 어렵기 때문에 여러 계층을 가진 트리 구조 디렉터리
  (tree-structured directory)가 생겨나게 되었다.
- 트리 구조 디렉터리는 최상위 디렉터리가 있고 그 아래에 여러 서브 디렉터리 (자식 디렉터리)가 있을 수 있다. 서브 디렉터리도 또 다른 서브 디렉터리를 가질 수 있다. 최상위 디렉터리는 흔히 루트 디렉터리
  (root directory)라고 부르고 슬래스(/)로 표현.
- 그러다 보니 자연스레 생긴 개념이 바로 경로(path). 경로는 디렉터리를 이용해 파일 위치, 나아가 파일 이름을 특정 짓는 정보이다.

### 절대 경로와 상대 경로
#### 절대 경로 (absolute path)
- 같은 디렉터리에는 동일한 이름의 파일이 존재할 수 없지만, 서로 다른 디렉터리에는 동일한 이름의 파일이 존재할 수 있다. 이는 루트 디렉터리로부터 파일까지 경로가 다르기 때문에 동일한 이름임에도 공존할 수
있는 것. 그래서 모든 파일은 루트 디렉터리에서 자기 자신까지 이르는 고유한 경로를 가지고 있고, 이를 절대 경로라고 부른다.
- 예를 들어 루트 디렉터리 아래 home 디렉터리 아래, minchul 디렉터리 아래에 a.sh가 있을 때, a.sh의 절대 경로는 '루트 디렉터리 아래, home 디렉터리 아래, minchul 디렉터리 아래에 있는 a.sh'라고 
표현 가능. 참고로 유닉스, 리눅스, macOS 등의 운영체제에서 슬래시 기호(/)는 루트 디렉터리를 표시할 뿐만 아니라 디렉터리와 디렉터리 사이의 구분자로도 사용한다. 이러한 방식으로 a.sh의 절대 경로를 표현하면
/home/minchul/a.sh로 표현 가능. (윈도우의 경우 디렉터리 구분자로 \ 사용. 즉, 윈도우에서 a.sh의 절대경로는 C:\home\minchul\a.sh로 표현됨)

#### 상대 경로 (relative path)
- 경로를 나타내는 또 다른 대중적인 방식으로 상대 경로가 있다. 절대 경로가 루트 디렉터리부터 시작하는 경로라면 상대 경로는 현재 디렉터리부터 시작하는 경로. 
- 예를 들어 현재 디렉터리 경로가 /home 이고 절대 경로가 /home/minchul/a.sh 인 파일의 상대 경로는 minchul/a.sh 이다.

### 디렉터리 연산을 위한 시스템 호출
- 운영체제가 파일 연산을 위한 시스템 호출을 제공하는 것처럼 운영체제는 디렉터리 연산을 위한 시스템 호출도 제공.
  - 디렉터리 생성 / 삭제 / 열기 / 닫기 / 읽기

### 디렉터리 엔트리
- 중요하게 알아야 할 사실은 많은 운영체제에서는 디렉터리를 그저 '특별한 형태의 파일'로 간주한다. 즉, 디렉터리도 파일이다. 단지 포함된 정보가 조금 특별할 뿐.
- 파일이 내부에 해당 파일과 관련된 정보를 담고 있다면, 디렉터리는 내부에 해당 디렉터리에 담겨 있는 대상과 관련된 정보를 담고 있다. 그리고 이 정보는 보통 테이블(표) 형태로 구성된다. 즉, 디렉터리는
보조기억장치에 테이블 형태의 정보로 저장된다.
- 각각의 엔트리(행)에 담기는 정보는 파일 시스템마다 차이가 있지만, 파일 시스템을 막론하고 디렉터리 엔트리가 공통으로 포함하는 정보가 있다면 그것은 디렉터리에 포함된 대상의 이름과 그 대상이 보조기억장치 내에
저장된 위치를 유추할 수 있는 정보가 담긴다는 점. 다시 말해 디렉터리 엔트리만 보아도 해당 디렉터리에 무엇이 담겨 있는지, 그리고 그것들은 보조기억장치의 어디에 있는지를 직간접적으로 알 수 있다.
- 디렉터리 테이블 예.

| 파일 이름 | 위치를 유추할 수 있는 정보 |
|-------|-----------------|
|       |                 |
|       |                 |
|       |                 |

- 파일 시스템에 따라 디렉터리 엔트리에 다음과 같이 파일 속성을 명시하는 경우도 있다.

| 파일 이름 | 위치를 유추할 수 있는 정보 | 생성 시간 | 수정된 시간 | 크기  | ... |
|-------|-----------------|-------|--------|-----|-----|
|       |                 |       |        |     |     |
|       |                 |       |        |     |     |
|       |                 |       |        |     |     |

- 예를 들어 루트 디렉터리 아래에 home 디렉터리 아래에 minchul, guest 디렉터리가 있고, minchul 디렉터리 아래에 a.sh, b.c, c.tar가 있을 때, home 디렉터리 테이블은 다음과 같다.

| 파일 이름   | 위치를 유추할 수 있는 정보 |
|---------|-----------------|
| ..      |                 |
| .       |                 |
| minchul |                 |
| guest   |                 |

- 디렉터리 엔트리를 통해 보조기억장치에 저장된 위치를 알 수 있기 때문에 home 디렉터리에서 minchul 디렉터리가 저장된 곳을 알 수 있고 따라서 그곳으로 이동 가능.
- 마찬가지로 minchul 디렉터리 엔트리에는 디렉터리에 속한 파일들의 이름(a.sh, b.c, c.tar)과 이들의 위치를 알 수 있는 정보 등이 포함되어 있기 때문에 이 파일들이 보조기억장치 내에 저장된 위치를 알 수 
있고 실행할 수 있는 것.

## 상대 경로를 나타내는 또 다른 방법
- 대부분의 운영체제는 현재 작업 디렉터리를 마침표(.)로 나타내고, 현재 작업 디렉터리의 상위 (부모) 디렉터리를 마침표 두번(..)으로 나타낸다. 그리고 흔히 이 기호를 이용해 상대 경로를 표현.
- 예를 들어. 현재 절대 경로가 /home/minchul/b.c 의 절대 경로에서 현재 작업 디렉터리가 /home 인 경우 상대 경로는 ./minchul/b.c 로 나타낼 수 있다.
- 또 다른 사용 예로 윈도우, 리눅스, 유닉스, macOS 등 대부분의 운영체제에서는 cd(change directory) 명려으로 현재 작업 디렉터리를 이동할 수 있다.
- 윈도우 루트 디렉터리 (C:\) 아래 test 라는 디렉터리가 있을 때 `cd C:\test` 명령을 이용해 루트 디렉터리 아래에 있는 test 디렉터리로 현재 작업 디렉터리를 이동할 수 있다.
- 현재 작업 디렉터리가 C:\ 인 경우 상대 경로인 `cd test` 또는 `cd .\test`를 입력해도 test 디렉터리로 이동할 수 있다.
- test 디렉터리 내에서 `cd ..` 을 입력하면 부모 디렉터리인 루트 디렉터리로 이동한다.
- 참고로 루트 디렉터리는 부모 디렉터리가 없기 때문에 루트 디렉터리의 ..은 자기 자신을 의미해, 루트 디렉터리에서 `cd ..`을 입력해도 현재 작업 디렉터리는 변하지 않는다.

## 키워드 정리
- 파일은 의미 있고 관련 있는 정보를 모은 논리적 단위.
- 운영체제는 파일의 확장자를 통해 파일의 유형을 파악할 수 있다.
- 파일의 속성에는 파일과 관련된 다양한 부가 정보가 있다.
- 디렉터리를 이용하면 여러 개의 파일 또는 디렉터리를 묶어 관리할 수 있다.
- 경로는 디렉터리를 이용해 위치를 특정 짓는 정보.
- 절대 경로는 루트 디렉터리부터 시작하는 경로이고, 상대 경로는 현재 디렉터리부터 시작하는 경로.
