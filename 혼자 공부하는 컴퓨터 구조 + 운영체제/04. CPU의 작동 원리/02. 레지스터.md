# 레지스터
- 프로그램 속 명령어와 데이터는 실행 전후로 반드시 레지스터에 저장됨.

## 반드시 알아야 할 레지스터
- 레지스터들은 저마다의 역할이 있고, 그에 걸맞는 내용을 저장한다. 아래 여덟가지 레지스터가 있다.
1. 프로그램 카운터
2. 명령어 레지스터
3. 메모리 주소 레지스터
4. 메모리 버퍼 레지스터
5. 플래그 레지스터
6. 범용 레지스터
7. 스택 포인터
8. 베이스 레지스터

### 프로그램 카운터
- 프로그램 카운터(PC)는 메모리에서 가져올 명령어의 주소, 즉, 메모리에서 읽어 들일 명령어의 주소 저장.
- 명령어 포인터(IP)라고 부르는 CPU도 있음.
- 프로그램 카운터는 지속적으로 증가하며 계속해서 다음 명령어를 읽어 들일 준비를 함.

### 명령어 레지스터
- 명령어 레지스터(IR)은 해석할 명령어, 즉, 방금 메모리에서 읽어 들인 명령어를 저장하는 레지스터.
- 제어장치는 명령어 레지스터 속 명령어를 받아들이고 이를 해석한 뒤 제어 신호를 내보냄.

### 메모리 주소 레지스터
- 메모리 주소 레지스터(MAR)는 메모리의 주소를 저장하는 레지스터.
- CPU가 읽어 들이고자 하는 주소 값을 주소 버스로 보낼 때 메모리 주소 레지스터를 거치게 됨.

### 메모리 버퍼 레지스터
- 메모리 버퍼 레지스터(MBR)는 메모리와 주고받을 값(데이터와 명령어) 저장하는 레지스터.
- 메모리에 쓰고 싶은 값이나 메모리로부터 전달받은 값은 메모리 버퍼 레지스터를 거침.

### 범용 레지스터
- 범용 레지스터는 이름 그대로 다양하고 일반적인 상황에서 자유롭게 사용할 수 있는 레지스터.
- 메모리 버퍼 레지스터는 데이터 버스로 주고받을 값만 저장. 메모리 주소 레지스터는 주소 버스로 내보낼 주소값만 저장.
- 범용 레지스터는 데이터와 주소를 모두 저장할 수 있다.
- 일반적으로 CPU 안에는 여러 개의 범용 레지스터들이 있고, 현대 대다수 CPU는 모두 범용 레지스터를 가지고 있다.

### 플래그 레지스터
- ALU 연산 결과에 따른 플래그를 플래그 레지스터에 저장.
- 연산 결과 또는 CPU 상태에 대한 부가적인 정보를 저장하는 레지스터.

## 특정 레지스터를 이용한 주소 지정 방식 1 : 스택 주소 지정 방식
- 프로그램 카운터, 스택 포인터, 베이스 레지스터는 주소 지정에 사용될 수 있는 특별한 레지스터.
- 스택 포인터는 스택 주소 지정 방식이라는 주소 지정 방식에 사용되고, 프로그램 카운터와 베이스 레지스터는 변위 주소 지정 방식이라는 주소 지정 방식에 사용됨.
- 스택 주소 지정 방식은 스택과 스택 포인터를 이용한 주소 지정 방식. 스택 포인터란 스택의 꼭대기를 가리키는 레지스터.
즉, 스택에 마지막으로 저장한 값의 위치를 저장하는 레지스터.
- 스택은 메모리 안에 있다. 정확히는 메모리 안에 스택처럼 사용할 영역이 정해져 있는데, 이를 스택 영역이라고 한다.

## 특정 레지스터를 이용한 주소 지정 방식 2 : 변위 주소 지정 방식
- 변위 주소 지정 방식이란 오퍼랜드 필드의 값(변위)과 특정 레지스터의 값을 더하여 유효 주소를 얻어내는 주소 지정 방식.
- 변위 주소 지정 방식을 사용하는 명령어는 연산 코드 필드, 어떤 레지스터의 값과 더할지를 나타내는 레지스터 필드, 주소를 담고 있는 오퍼랜드 필드가 있다.
- 이때, 변위 주소 지정 방식은 오퍼랜드 필드의 주소와 어떤 레지스터를 더하는지에 따라 상대 주소 지정 방식, 베이스 레지스터 주소 지정 방식 등으로 나뉨.

### 상대 주소 지정 방식
- 상대 주소 지정 방식은 오퍼랜드와 프로그램 카운터 값을 더해 유효 주소를 얻는 방식
- 프로그램 카운터에는 읽어 들일 명령어의 주소가 저장되어 있다. 만약 오퍼랜드가 음수, 가령 -3이면 CPU는 읽어들이기로 한 명령어로부터 '세 번째 이전'번지로 접근.
- 상대 주소 지정 방식은 프로그래밍 언어의 if문과 유사하게 모든 코드를 실행하는 것이 아닌, 분기하여 특정 주소의 코드를 실행할 때 사용됨.

### 베이스 레지스터 주소 지정 방식
- 베이스 레지스터 주소 지정 방식은 오퍼랜드와 베이스 레지스터의 값을 더하여 유효 주소를 얻는 방식.
- 베이스 레지스터는 '기준 주소', 오퍼랜드는 '기준 주소로부터 떨어진 거리'로서의 역할을 한다.
- 즉, 베이스 레지스터 주소 지정 방식은 베이스 레지스터 속 기준 주소로부터 얼마나 떨어져 있는 주소에 접근할 것인지를 연산하여 유효 주소를 얻어내는 방식.

## 정리
- 프로그램 카운터는 메모리에서 가져올 명령어의 주소, 명령어 레지스터는 해석할 명령어를 저장한다.
- 메모리 주소 레지스터는 메모리의 주소, 메모리 버퍼 레지스터는 메모리와 주고받을 데이터를 저장한다.
- 범용 레지스터는 데이터와 주소를 모두 저장하고, 플래그 레지스터는 연산 결과 혹은 CPU 상태에 대한 부가 정보를 저장한다.
- 스택 포인터는 스택 최상단의 위치를 저장한다.
- 베이스 레지스터에 저장된 주소는 기준 주소로서의 역할을 한다.
