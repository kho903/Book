# 03. 데이터베이스 서버
- 많은 RDBMS가 클라이언트/서버 모델 채택. 특히 웹 시스템과 연동하는 RDBMS라면, 접속자 수가 수백 명에 달하는 전용 데이터베이스 서버를 운용하는 일도 드물지 않다.
- 여기서는 데이터베이스를 네트워크로 연결된 서버 관점에서 보자.
- RDBMS는 복수의 클라이언트가 보내오는 요청에 응답할 수 있도록 클라이언트/서버 모델로 동작. 클라이언트는 서버에 접속 요청이나 SQL 명령 실행 요청을 보내고, 서버는 이를 처리하고 클라이언트에 그 결과를 반환.
- 일반적인 RDBMS는 네트워크 상에 하나의 서버를 두고 독점해 사용. 하지만 개발 진행시 고가의 서버를 준비하기란 어려워 이런 경우 자신의 PC에 클라이언트와 서버 모두를 실행시켜 운용 가능.

## 1. 클라이언트/서버 모델
- 클라이언트/서버 모델이란 사용자 조작에 따라 요청을 전달하는 '클라이언트'와 해당 요청을 받아 처리하는 '서버'로 소프트웨어를 나누고, 복수의 컴퓨터 상에서 하나의 모델을 구현하는 시스템을 말한다.

### 웹 시스템에서의 클라이언트/서버
- 웹 시스템이란 브라우저와 웹 서버로 구성되는 클라이언트/서버 모델의 시스템.
> 클라이언트/서버 모델은 클라이언트와 서버로 구성된다!
- 웹 시스템에서 클라이언트 기능을 하는 브라우저는 사용자가 지정한 URL과 연결된 웹 서버에 요청을 보낸다. 요청 내용은 상황에 따라 달라지지만, 대부분 페이지 열람일 것이다. 이때 클라이언트가 보내는 요구사항을 웹 용어로
'리퀘스트(request)'라고 한다.
- 클라이언트의 요청을 받은 웹 서버에서는 그에 맞게 처리. 요청이 '페이지 열람'이므로 서버는 브라우저가 페이지를 표시할 수 있도록 HTML로 된 데이터를 클라이언트로 반환. 데이터는 네트워크를 통해 전송됨. 서버의 응답은
웹 용어로 '리스폰스(response)'라고 한다. 페이지 내용을 전달받은 브라우저는 화면에 페이지 내용 표시.
- 이것으로, 전형적인 클라이언트/서버 모델에서의 처리가 하나 종료되었다. 실제 웹에서는 요청과 응답이 되풀이되면서 웹 페이지가 표시된다.

### RDBMS의 클라이언트/서버
- RDBMS도 웹 시스템과 마찬가지로 클라이언트/서버 모델로 시스템이 구성됨. 하지만 단순히 요청과 응답을 되풀이하는 것은 아니다.
- 먼저, 웹 시스템에는 없었던 사용자 인증이 필요. RDBMS는 사용자 별로 데이터베이스 접근 제한 가능. 이 때문에 데이터베이스 사용 위해서는 사용자 인증을 거쳐야 한다. 사용자 인증은 ID, 비밀번호로 실행됨. 인증 실패시,
데이터베이스에 접속 불가.
> 데이터베이스를 사용할 때는 ID와 비밀번호를 이용한 사용자 인증이 필요하다!

### SQL명령 실행
- RDBMS에 접속하면 SQL 명령을 서버에 보낼 수 있다. 서버가 가동 중이고 네트워크에도 연결되어 있다면, 클라이언트에서 SQL 명령을 보낼 때 서버는 응답할 것이다. 일단 한 번 데이터베이스에 접속하면, 이를 유지해 재접속
없이 SQL 명령을 여러 번 보낼 수 있다.
- 사용이 끝나면 데이터베이스와의 접속은 끊긴다. 일반적으로 클라이언트를 종료하면 데이터베이스 접속도 끊긴다.

## 2. 웹 애플리케이션 구조
- 웹 애플리케이션은 일반적으로 웹 서버와 데이터베이스 서버의 조합으로 구축된다. 여기에서는 이와 같은 웹 애플리케이션이 어떻게 구성되는지 알아보자.
- 웹 시스템은 앞에서 클라이언트/서버 모델로 구성되며 브라우저가 클라이언트, 아파치(Apache)나 IIS와 같은 웹 소프트웨어가 서버 역할을 한다. 클라이언트가 서버에게 요청하면 웹 서버는 클라이언트에게 응답한다.
- 웹 사이트가 정적인 HTML만으로 구성되었다면 웹 서버만으로도 시스템 구축 가능. 하지만, 웹 애플리케이션이라 부를 정도의 규모라면 데이터베이스가 필요하다.
- 웹 서버에서 동적으로 HTML을 생성하려면 제어용 프로그램이 필요. 웹 서버에는 CGI라 불리는 동적 콘텐츠를 위한 확장 방식이 존재. 이 CGI를 이용해 프로그램과 웹 서버 간을 연동, 통신해 처리.
- 프로그래밍 언어로는 펄, PHP, 루비 등의 스크립트 언어가 자주 사용됨. 윈도우의 경우 ASP.NET이 많이 사용되며, 자바와 같은 Servlet과 같은 조합도 있다.
- 실제로 데이터베이스에 접속하는 것은 프로그래밍 언어로 만들어진 CGI 프로그램이다. 데이터베이스 서버를 사용하기 위해서는 먼저 데이터베이스 서버와의 접속이 성립되어야 한다. 그 후 데이터베이스에 필요한 SQL 명령을 전달하고,
실행 결과는 클라이언트로 되돌아간다. 이떄 웹 서버의 CGI 프로그램이 데이터베이스의 클라이언트가 된다.
- 클라이언트와 서버가 네트워크로 연결되어 있다면 서로 다른 머신에 두어도 무방. 웹 서버와 데이터베이스 서버를 서로 다른 머신에 두면 처리가 분산되어 시스템 전체 성능이 향상된다. 실제로 대규모 시스템에서는 웹 서버나
데이터베이스 서버를 여러 대로 구성하여 운용하는 경우도 많다.
> 클라이언트/서버 모델은 유연한 하드웨어 구성을 실현한다!

## 3. MySQL 서버와 mysql 클라이언트
- MySQL 패키지를 PC에 인스톨하면 서버와 클라이언트 모두 사용 가능. MySQL 서비스가 데이터베이스 서버가 되고, mysql 커맨드가 클라이언트가 된다.
- MySQL 서비스는 PC 기동과 함께 자동으로 실행된다. MySQL 서버에 접속해서 SQL 명령을 실행하는 방법은 여러 가지가 있지만, 여기서는 MySQL 표준 커맨드인 mysql 클라이언트를 이용.
- 앞에서 본 클라이언트/서버 모델은 시스템의 하드웨어 구성을 유연하게 변경할 수 있도록 해준다. 클라이언트가 많아져 서버의 능력이 부족해지면 추가로 설치해 부하 분산해 시스템 전체의 성능을 높일 수 있다.
- PC 한 대로 클라이언트와 서버 모두 실행할 수 있지만 네트워크 기능은 필요하다. 클라이언트에서 서버에 접속할 필요가 있는데, 이때 네트워크를 경유해서 PC의 서버로 되돌아오는 형태로 접속한다. 이를 '루프 백 접속'이라 한다.
