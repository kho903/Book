# 02. 구조적 모델
- 네트워크는 다수의 시스템을 전송 매체로 연결해 구성한 시스템의 집합체. 소규모의 네트워크들은 전송 매체로 연결되어 더 큰 네트워크로 확장 가능.
- 네트워크는 외형상 호스트 시스템과 전송 매체로 구분. 물리적 형태와는 별도로, 내부 기능을 기초로 해 다양한 구조로 세분화 가능. 특히, 호스트가 제공하는 복잡한 네트워크 기능을 연관된 그룹으로 묶어 계층
모델로 설명 가능.

## 1. OSI 7계층 모델
- 국제 표준화 단체 ISO (International Standard Organization)에서는 OSI(Open Systems Interconnection) 7계층 모델을 제안해, 네트워크에 연결된 시스템이 갖추어야 할 기본 구조와 기능을 
상세히 정의하고 있다.

### 계층 구조
- OSI 7 계층 모델 (OSI 7 Layer Model)에 따르면, 네트워크에 연결된 호스트들은 7개 계층으로 모듈화된 전송 기능을 갖추어야 함.
- 일반 사용자는 OSI 7계층 맨 위에 있는 응용 계층으로 데이터 송수신 요청. 이 요청은 하위 계층에 순차적으로 전달되어 맨 아래 물리 계층으로 상대 호스트에게 전송됨.
- 요청이 각 계층으로 하달되는 과정에서 계층별로 담당 기능 수행 및 안전하게 전달. 그 과정에서 송수신 호스트 사이의 라우터들이 중개 기능 수행. 일반적으로 라우터는 하위 3개 계층 기능만 수행.
- 데이터 수신 호스트에서는 송신 호스트와는 반대 방향으로 처리됨. 물리 계층으로 들어온 데이터는 순차적인 상향 전달 과정으로 응용 계층으로 올라감. 수신과 정반대 과정을 순차적으로 밟아 송신 호스트로 되돌아감.
- 데이터 송수신하는 최종 주체는 송수신 호스트 양쪽에 위치한 응용 계층. 하부 계층인 표현 계층은 응용 계층을 지원하기 위한 고유 기능을 수행. 이와 같은 계층 구조의 원리는 모든 상하 계층에 대해 상대적으로
적용되며, 각각의 계층들은 데이터 전송에 필요한 기능들을 나누어 처리.

### 계층별 기능
- OSI 7계층 모델의 각 계층은 독립적인 고유 기능 수행, 하위 계층이 바로 위 계층에 서비스를 제공하는 형식으로 동작.

#### 물리 계층 (Physical Layer)
- 네트워크에서 호스트들이 데이터를 전송하려면 반드시 물리적인 전송 매체로 연결되어 있어야 하는데, 물리 계층은 호스트를 전송매체와 연결하기 위한 인터페이스 규칙과 전송 매체의 특성을 다루며, 크게
유선 매체와 무선 매체로 구분됨.

#### 데이터 링크 계층 (Data Link Layer)
- 물리 계층으로 데이터 전송 과정에서는 잡음(Noise) 같은 여러 외부 요인으로 물리적 오류가 발생할 수 있음.
- 데이터 링크 계층은 물리 계층의 오류에 관한 오류 제어(Error Control) 기능 수행. 이를 위해 오류의 발생 사실을 인지하는 기능과 오류 복구 기능 필요.
- 물리 계층은 물리적 전송 오류를 감지(Sense)하는 기능을 제공해 상위 계층인 데이터 링크 계층에서 오류를 인지할 수 있도록 해줌. 그렇지 않은 경우 스스로 별도 기능 수행해 오류를 인지해야 함.
- 대표적인 물리적 오류로는 데이터가 도착하지 못하는 데이터 분실과 내용이 깨져서 도착하는 데이터 변형.
- 일반적으로 컴퓨터 네트워크에서 오류 복구는 송신자가 원래의 데이터를 재전송(Retransmission)하는 방식으로 처리.

#### 네트워크 계층 (Network Layer)
- 송신 호스트가 전송한 데이터가 수신 호스트까지 안전하게 도착하려면 여러 개의 중개 시스템인 라우터(Router)를 거쳐야 함.
- 이 과정에서 데이터가 올바른 경로 선택 지원 계층이 네트워크 계층.
- 기본적으로 네트워크 내부 구조는 라우터들로 구성되고, 네트워크 바깥쪽에 연결되는 송수신 호스트 사이의 데이터 중개 기능을 수행.
- 데이터 중개 과정에서 오류가 발생할 수 있으므로 네트워크 계층에도 오류 제어 기능이 필요.
- 네트워크 부하 증가시 특정 지역에 혼잡(Congestion)이 발생할 수 있는데, 혼잡 제어(Congestion Control)도 데이터 전송 경로와 관계되므로 네트워크 계층이 담당.

#### 전송 계층 (Transport Layer)
- 전송 계층은 송신 프로세스와 수신 프로세스 간의 연결(Connection) 기능 제공으로 프로세스 사이의 안전한 데이터 전송 지원.
- 전송 계층은 데이터가 전송되는 최족적인 경로상의 양 끝단 사이의 연결이 완성되는 계층. 
- 계층 4까지의 기능은 운영체제에서 시스템 콜 형태로 상위 계층에 제공하며, 계층 5 ~ 7 의 기능은 응용 프로그램으로 작성됨.

#### 세션 계층 (Session Layer)
- 세션 계층은 전송 계층에서 제공하는 연결의 개념과 유사한 세션 연결을 지원하지만, 이보다는 더 상위의 논리적 연결.
- 즉, 응용 환경에서 사용자 간 대화 (Dialog) 개념의 연결로 사용되기 때문에 전송 계층의 연결과 구분됨.

#### 표현 계층 (Presentation Layer)
- 표현 계층은 전송되는 데이터의 의미 (Semantic)을 잃지 않도록 올바르게 표현(Syntax)하는 방법을 다룸. 즉, 정보를 교환하는 호스트들이 표준화된 방법으로 데이터를 인식할 수 있게 해줌.
- 또한 데이터의 표현이라는 본래의 기능에 더해, 현재의 표현 계층은 압축과 암호화라는 기능도 중요하게 다룸.

#### 응용 계층 (Application Layer)
- 응용 계층은 일반 사용자를 위한 다양한 네트워크 응용 서비스 지원.

### 프로토콜과 인터페이스
- 각각의 계층은 정해진 방식과 절차에 따라 상대 계층과 통신하는데, 이 과정에서 필요한 규칙을 프로토콜(Protocol)이라 함.
- 상하위 계층 간에는 인터페이스(Interface)라는 규칙 존재, 하위 계층이 상위 계층에 제공하는 인터페이스를 서비스(Service)라 부름.
- 한 호스트를 기준으로 데이터 전송은 위아래 양방향 모두 가능하며, 두 호스트 사이에서는 좌우 양방향으로 모두 가능하다. 다만, 좌우 간의 물리적인 데이터 전송은 반드시 가장 아래의 물리 계층을 통해 이루어짐.
- 호스트1과 호스트2의 계층 n 프로토콜이 서로 통신하려면 계층 n-1 프로토콜의 서비스가 필요. 즉, 호스트1의 계층 n이 호스트2의 계층 n에 데이터를 전송하는 과정은 하위의 계층 n-1을 통해 이루어짐. 먼저,
호스트1의 계층 n-1에 전송할 데이터를 주어 호스트2에 전송하도록 부탁. 그러면 호스트1의 계층 n-1은 다시 하위 계층의 도움을 받아 호스트2의 계층 n-1에 데이터를 보낸다. 마지막으로 호스트2의 계층 n-1이 수신한
데이터를 계층 n에 올려줌으로써 계층 n사이의 통신이 완료됨.
- 이 원리는 OSI 7계층 모델에서 7계층에 모두 적용되며, 상대 호스트에 물리적으로 데이터를 전송하는 것은 맨 아래의 물리 계층. 물리 계층 위에 있는 계층 프로토콜들은 각각의 정해진 기능 수행하며 논리적인 통신을
하는 것.

### 인터넷의 계층 모델
- Layer 5 ~ 7 : Application Layer
- Layer 4 : Transport Layer
- Layer 3 : Internetwork Layer
- Layer 1, 2 : Network Interface Layer

## 2. 인터네트워킹 (Internetworking)
- 네트워크와 네트워크의 연결을 인터네트워킹이라 함.
- 연결되는 네트워크 수가 증가할수록 복잡도 증가.
- 인터넷은 IP 프로토콜을 지원하는 전 세계 모든 네트워크가 반복 구조로 연결된 시스템. 라우터라는 중개 장비 사용해 네트워크들을 연결

### 네트워크의 연결
- 독립적으로 운영되는 2개 이상의 네트워크가 연동되어 정보를 교환하려면 이를 적절히 연결해 데이터 중개 가능한 인터네트워킹 시스템 필요.
  - 네트워크 연동의 의미는 물리적인 연결 + 데이터 중개에 필요한 상위의 네트워크 프로토콜들이 지원됨을 의미
- 인터넷에서 인터네트워킹 시스템의 주요 기능은 전송 데이터의 경로 선택과 관계. 예를 들어 3개의 네트워크가 연결된 인터네트워킹 시스템에서 1번에 유입된 데이터를 2,3번 중 어디로 보낼 것이가 선택해야 함.
이 기능은 7계층 모델에서 네트워크 계층에 포함되므로 인터네트워킹 시스템은 네트워크 계층을 포함한 하위 3개 계층의 기능을 수행.
- 인터넷의 내부 구조는 이와 같은 인터네트워킹 시스템들이 복잡하게 연결되어 상호 유기적인 협조 체제로 동작.

### 게이트웨이 (Gateway)
- 인터네트워킹 기능을 수행하는 시스템을 게이트웨이라 부름. 종류는 다양하지만, 일반적인 지원 기능의 한계로 리피터, 브리지, 라우터 등으로 나뉨.

#### 리피터 (Repeater)
- 물리 계층의 기능 지원. 물리적 신호는 전송 거리가 멀수록 감쇄되어 중간에 보완 필요. 무선 신호 혹은 유선 신호의 전기적 신호도 거리가 멀어질수록 신호의 크기가 약해진다.
- 따라서 리피터는 한쪽에서 입력된 신호를 물리적으로 단순히 증폭해 다른 쪽으로 중개 역할.

#### 브리지 (Bridge)
- 리피터는 단순히 신호 증폭 역할. 전송 과정에서 발생하는 물리적인 오류 문제는 다루지 않음. 이를 보완한 브리지는 리피터 기능에 데이터 링크 계층의 기능이 추가된 것으로 물리 계층에서 발생한 오류를 해결해줌.
- 예를 들어, 가정에서 사용하는 무선 공유기는 유무선 기능을 모두 지원하는 브리지의 예.

#### 라우터 (Router)
- 라우터는 물리 계층, 데이터 링크 계층, 네트워크 계층의 기능 지원. 네트워크 계층은 경로 선택 기능을 제공해야 하므로 임의의 네트워크에서 들어온 데이터를 어느 네트워크로 전달할지 판단할 수 있어야 함.
- 이를 위해 라우터는 자신과 연결된 네트워크와 호스트들의 정보를 유지, 관리함으로써 특정 경로가 이용 가능한지 여부와 다수의 경로 중에서 어느 경로가 빠른 데이터 전송을 지원하는지 판단할 수 있어야 함.
- 네트워크와 호스트에 대한 정보는 일반적으로 라우팅 테이블(Routing Table)에 보관됨.

## 3. 프로토콜 (Protocol)
- 프로토콜은 통신 시스템이 데이터를 교환하기 위해 사용하는 통신 규칙. OSI 7 계층 모델에서는 각 계층에서 수행하는 프로토콜이 서로 역할 분담해 독립적으로 동작.
- 계층 1에는 계층 1끼리 통신할 수 있는 프로토콜이 존재하고, 계층 2에는 계층 2끼리 통신할 수 있는 프로토콜 존재.

### 데이터 단위
- 네트워크 프로토콜을 사용해 데이터 교환시 먼저 데이터를 특정 형태로 규격화하는 작업 필요. 예로, 우편물의 규격 봉투와 같은 원리.
- 네트워크에서도 데이터를 프로토콜에서 정의된 데이터 규격에 맞춰 묶어주어야 하는데, 이와 같은 한 단위의 규격으로 묶인 전송 데이터를 데이터 단위라 함.
- OSI 7계층 모델의 각 계층에서 규격화된 데이터에는 아래와 같은 고유 명칭이 있는데, 계층에 상관없이 사용할 때는 통칭하여 PDU(Protocol Data Unit)이라 부름.
- 계층별 데이터 단위는 다음과 같다.

| 데이터 단위                                | 설명                                                                                                                             |
|---------------------------------------|--------------------------------------------------------------------------------------------------------------------------------|
| APDU(Application Protocol Data Unit)  | 응용 계층에서 사용                                                                                                                     |
| PPDU(Presentation Protocol Data Unit) | 표현 계층에서 사용                                                                                                                     |
| TPDU(Transport Protocol Data Unit)    | 전송 계층에서 사용. 인터넷에서 사용하는 전송 계층 프로토콜인 TCP에서는 세그먼트(Segment)라 부르고, UDP에서는 데이터그램(Datagram)이라 부름. 데이터그램은 계층 4 프로토콜의 전송 데이터를 가리킬 때도 사용 |
| NPDU(Netword Protocol Data Unit)      | 네트워크 계층에서 사용. 보통 패킷(Packet)이라 부름. 패킷은 원래 네트워크 계층의 IP 프로토콜에서 유래, but 요즘은 네트워크 계층의 전송 데이터를 의미                                    |
| DPDU(Data Link Protocol Data Unit)    | 데이터 링크 계층에서 사용. 보통 프레임(Frame)이라 부름.                                                                                            |

- 데이터 단위의 용어 중에서 네트워크 계층에서 정의된 패킷이 인터넷에서 가장 많이 인용되며, 데이터 링크 계층에서 사용하는 프레임도 중요. 전송 계층에서 정의된 데이터그램은 가상 회선이라는 용어와 대비되면서
중요하게 다루어지기 때문에 이들 세 용어에 익숙해질 필요가 있다.
