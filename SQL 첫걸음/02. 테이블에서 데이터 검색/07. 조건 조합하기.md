# 07. 조건 조합하기
- 여기에서는 조건을 조합하여 더 세밀하게 검색할 수 있도록 3개의 논리 연산자를 알아보자. (AND, OR, NOT)
```sql
조건식1 AND 조건식2
조건식1 OR 조건식2
NOT 조건식
```
- 실제로 SELECT 명령을 사용해 DB에서 데이터를 검색할 때 단순한 조건식을 넣으면 많은 결괏값으로 알아보기 힘듦.
- 따라서 통상적으로 2개 이상의 조건식을 조합해 검색하는 경우가 많다. 조건식을 조합해 사용할 경우 복수의 조건을 WHERE 구로 지정.
- 조합할 떄 AND, OR, NOT 3가지 방법 사용 가능

## 1. AND로 조합하기
- 복수 조건을 조합할 경우 AND를 가장 많이 사용. 논리 연산자의 하나로 좌우에 항목이 필요한 이항 연산자가 된다.
- 좌우의 식 모두 참일 경우 AND 연산자는 참을 반환. '모든 조건을 만족하는 경우 조건식은 참이 된다'고 할 떄 AND 연산자로 조건식 조합.
- SYNTAX
```sql
조건식1 AND 조건식2
```
- sample24 테이블에서 a 열과 b 열이 모두 0이 아닌 행을 검색하는 경우를 생각해보자. 조건은 `a <> 0`, `b <> 0` 라는 조건식이 된다.
- 이들 조건을 모두 만족해야 하므로 2개의 조건식을 AND 로 연결한다.
```text
mysql> select * from sample24;
+------+------+------+------+
| no   | a    | b    | c    |
+------+------+------+------+
|    1 |    1 |    0 |    0 |
|    2 |    0 |    1 |    0 |
|    3 |    0 |    0 |    1 |
|    4 |    2 |    2 |    0 |
|    5 |    0 |    2 |    2 |
+------+------+------+------+
5 rows in set (0.00 sec)
```
```text
mysql> select * from sample24 where a <>0 AND B <> 0;
+------+------+------+------+
| no   | a    | b    | c    |
+------+------+------+------+
|    4 |    2 |    2 |    0 |
+------+------+------+------+
1 row in set (0.00 sec)
```
- a 열이 0이 아닌 행은 no가 1, 4 인 2개 행. b열이 0이 아닌 행은 no 가 2, 4, 5 인 3개 행이다. a열과 b 열이 모두 0이 아닌 행은 no가 4인
한 개의 행이다.
- AND 연산은 조건을 만족하는 행을 집합으로 표현했을 떄 이들 집합이 겹치는 부분, 즉 '교집합'으로 계산할 수 있다. AND 연산자는 논리곱을 계산하는
논리 연산자이다.
> AND로 조건식을 연결하면 모든 조건을 만족하는 행을 검색할 수 있다.

## 2. OR 로 조합하기
- '어느 쪽이든 하나만 참이 되면 조건식은 참이 된다'라고 할 경우에는 OR 로 조건식을 연결. OR 또한 논리 연산자의 하나로 좌우 항목이 모두 필요한 이항
연산자. AND와 달리 어느쪽이든 조건을 만족하면 결과는 참, 모든 조건이 거짓인 경우 결과는 거짓이 된다. 즉, OR는 '또는'에 해당한다.
```text
mysql> select * from sample24;
+------+------+------+------+
| no   | a    | b    | c    |
+------+------+------+------+
|    1 |    1 |    0 |    0 |
|    2 |    0 |    1 |    0 |
|    3 |    0 |    0 |    1 |
|    4 |    2 |    2 |    0 |
|    5 |    0 |    2 |    2 |
+------+------+------+------+
5 rows in set (0.00 sec)
```
```text
mysql> select * from sample24 where a <> 0 or b<> 0;
+------+------+------+------+
| no   | a    | b    | c    |
+------+------+------+------+
|    1 |    1 |    0 |    0 |
|    2 |    0 |    1 |    0 |
|    4 |    2 |    2 |    0 |
|    5 |    0 |    2 |    2 |
+------+------+------+------+
4 rows in set (0.00 sec)
```
- a가 0이 아닌 것은 no가 1, 4 인 행. b가 0이 아닌 것은 no가 2, 4, 5 인 행. 이를 정리하면 a가 0이 아니거나 b가 0이 아닌 것은 no가
1, 2, 4, 5 인 행.
- OR 연산은 조건을 만족하는 행을 집합으로 표현했을 떄, 이 집합들을 합한 부분, 즉 '합집합'으로 계산할 수 있다. OR 연산자는 논리합을 계산하는 논리
연산자.
> OR로 조건식을 연결하면 어느 쪽이든 조건을 만족하는 행을 모두 검색할 수 있다!

## 3. AND 와 OR 를 사용할 경우 주의할점
- AND 나 OR 연산자의 좌우로 참, 거짓 반환 조건식을 지정하는 경우가 많다. 열이나 상수만을 지정해도 에러가 발생하지는 않지만 기대한 결과값을 얻을 수
없다. 예를 들어 no 열의 값이 1 또는 2인 행을 추출하고 싶을 경우, 다음과 같은 조건식을 사용하면 올바른 결과 값을 얻을 수 없다.
```sql
SELECT * FROM sample24 WHERE no = 1 OR 2
```
- 상수 '2'는 논리 연산으로 항상 참이 되기 떄문에 결과적으로 모든 행을 반환하게 된다. 올바른 조건식은 다음과 같다.
```sql
SELECT * FROM sample24 WHERE no = 1 OR no = 2
```
### AND 와 OR를 조합해 사용하기
- AND와 OR를 사용한 조건식으로 'a 열은 0이 아니다 (a <> 0)' 이라는 것을 던졌다. 0, 1, 2 라는 3개의 값이 있다면 a <> 0 은 1이나 2의
경우 참이된다. '~이 아닌'이라는 조건보다 '~인'이라는 조건이 더 이해하기 쉬울 것이다. 'a <> 0' 을 'a = 1 OR a = 2'라는 조건으로 'b <> 0'
을 'b = 1 OR b = 2'로 변경해 보자.
```text
mysql> select * from sample24;
+------+------+------+------+
| no   | a    | b    | c    |
+------+------+------+------+
|    1 |    1 |    0 |    0 |
|    2 |    0 |    1 |    0 |
|    3 |    0 |    0 |    1 |
|    4 |    2 |    2 |    0 |
|    5 |    0 |    2 |    2 |
+------+------+------+------+
5 rows in set (0.00 sec)
```
```text
mysql> select * from sample24 where a = 1 or a = 2 and b = 1 or b = 2;
+------+------+------+------+
| no   | a    | b    | c    |
+------+------+------+------+
|    1 |    1 |    0 |    0 |
|    4 |    2 |    2 |    0 |
|    5 |    0 |    2 |    2 |
+------+------+------+------+
3 rows in set (0.00 sec)
```
- 'a <> 0 AND b <> 0'이라는 조건식을 'a = 1 OR a = 2 AN b = 1 OR b = 2'로 변경해 보았는데, 'a <> 0 AND b <> 0'의 조건식
결과와는 다른 것을 알 수 있다.

### 연산자의 우선순위
- 결과가 다른 이유는 AND 와 OR의 계산 우선순위가 다르기 때문이다. OR 보다 AND 쪽이 우선 순위가 높기 떄문에 a = 2 AND b = 1 이 먼저
계산된다. 이를 괄호로 나타내면 다음과 같다.
```text
WHERE a=1 OR (a=2 AND b=1) OR b=2
```
- 즉 3개의 조건식이 OR로 연결된 것과 같아 진다. 처음 원한대로 조건을 지정하기 위해서는 다음과 같이 괄호로 우선 순위를 변경하면 된다.
```text
mysql> select * from sample24 where (a = 1 or a = 2) and (b = 1 or b = 2);
+------+------+------+------+
| no   | a    | b    | c    |
+------+------+------+------+
|    4 |    2 |    2 |    0 |
+------+------+------+------+
1 row in set (0.00 sec)
```
- 일반적으로 OR 조건식은 괄호를 묶어 지정하는 경우가 많다. 조건이 잘못 지정되는 것을 미연에 방지할 수 있도록 괄호로 묶어두는 습관을 붙이면 좋다.
> AND는 OR에 비해 우선 순위가 높다!

## 4. NOT으로 조합
```text
NOT 조건식
```
- NOT 연산자는 오른쪽에만 항목을 지정하는 '단항 연산자'이다. 오른쪽에 지정한 조건의 반대 값을 반환. 만약 조건식이 참을 반환하면 NOT은 이에 반하는
거짓을 반환. 주로 복수의 조건식에 대해 '~아닌', '~외에', '~를 제외한 나머지' 등의 조건을 지정할 경우 사용.
```text
mysql> select * from sample24;
+------+------+------+------+
| no   | a    | b    | c    |
+------+------+------+------+
|    1 |    1 |    0 |    0 |
|    2 |    0 |    1 |    0 |
|    3 |    0 |    0 |    1 |
|    4 |    2 |    2 |    0 |
|    5 |    0 |    2 |    2 |
+------+------+------+------+
5 rows in set (0.00 sec)
```
```text
mysql> select * from sample24 where not(a<>0 or b<>0);
+------+------+------+------+
| no   | a    | b    | c    |
+------+------+------+------+
|    3 |    0 |    0 |    1 |
+------+------+------+------+
1 row in set (0.00 sec)
```
